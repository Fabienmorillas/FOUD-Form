<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Commande Plateaux Repas | FOUD</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
  <style>
    :root { --accent:#ff9800; --accent-2:#43a047; }
    * { box-sizing: border-box; }
    body { font-family: "Poppins", sans-serif; background:#f7f7f7; color:#333; margin:0; }
    header { background:#1a1a1a; color:#fff; text-align:center; padding:1.25rem; font-size:1.3rem; }
    .container { max-width: 820px; margin: 2rem auto; padding: 0 1rem; }
    form { background:#fff; padding:1.5rem; border-radius:1rem; box-shadow:0 6px 18px rgba(0,0,0,.08); }
    h2 { font-size:1.1rem; margin:1rem 0 .75rem; color:var(--accent); border-bottom:2px solid #ffd08a; padding-bottom:.35rem;}
    .row { display:flex; gap:12px; flex-wrap:wrap; }
    .field { flex: 1 1 260px; }
    label { display:block; font-weight:600; margin:.35rem 0 .25rem; }
    input[type="text"], input[type="email"], input[type="tel"], input[type="date"], input[type="time"], select, textarea {
      width:100%; padding:.65rem .7rem; border:1px solid #d8d8d8; border-radius:.6rem; font-size:.98rem; background:#fff;
    }
    textarea { resize:vertical; min-height:68px; }
    .plateau { background:#fafafa; border:1px solid #e8e8e8; border-radius:1rem; padding:1rem; margin-bottom:1rem; position:relative; }
    .plateau-title { font-weight:600; color:#444; margin:0 0 .5rem; }
    .plateau-actions { position:absolute; top:10px; right:10px; display:flex; gap:8px; }
    .btn { display:inline-flex; align-items:center; gap:.4rem; border:none; border-radius:.6rem; cursor:pointer; padding:.7rem 1rem; font-weight:600; }
    .btn-primary { background:var(--accent); color:#fff; }
    .btn-primary:hover { filter:brightness(.95); }
    .btn-green { background:var(--accent-2); color:#fff; }
    .btn-green:hover { filter:brightness(.95); }
    .btn-ghost { background:#fff; color:#d32f2f; border:1px solid #ef9a9a; }
    .btn-ghost:hover { background:#fff3f3; }
    .inline-radios { display:flex; gap:16px; align-items:center; margin:.2rem 0 .6rem; }
    .success { display:none; margin-top:1rem; padding:1rem; background:#ecf9ee; color:#2e7d32; border:1px solid #b7e2bc; border-radius:.6rem; text-align:center; font-weight:600; }
    .divider { height:1px; background:#eee; margin:1rem 0; }
    .footer-note { font-size:.9rem; color:#777; margin-top:.5rem; }
  </style>
</head>
<body>
<header>üßæ Commande de Plateaux Repas ‚Äî FOUD</header>

<div class="container">
<form name="commande-foud" method="POST" data-netlify="true" netlify-honeypot="bot-field">
  <input type="hidden" name="form-name" value="commande-foud">
  <p style="display:none;">
    <label>Ne pas remplir ce champ : <input name="bot-field" /></label>
  </p>

  <h2>Plateaux nominatifs</h2>
  <div id="plateaux-container">
    <div class="plateau" data-index="1">
      <div class="plateau-actions">
        <button type="button" class="btn btn-ghost btn-remove" onclick="supprimerPlateau(this)" title="Supprimer ce plateau">Supprimer</button>
      </div>
      <p class="plateau-title">Plateau 1</p>

      <div class="row">
        <div class="field">
          <label>Nom du collaborateur</label>
          <input type="text" name="nom-1" required>
        </div>
        <div class="field">
          <label>Entr√©e</label>
          <select name="entree-1" required>
            <option value="">-- S√©lectionnez une entr√©e --</option>
            <option>≈íufs Mimosa / salade m√¢che</option>
            <option>Focaccia fa√ßon pissaladi√®re</option>
            <option>Velout√© de poireaux / pommes de Terre</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label>Plat</label>
          <select name="plat-1" required>
            <option value="">-- S√©lectionnez un plat --</option>
            <option>Cannelloni de veau / champignons / sauge</option>
            <option>La salade C√©sar</option>
            <option>Epaule d‚Äôagneau confite / pur√©e de pommes de terre</option>
            <option>Poulet sauce Satay / Riz Basmati</option>
            <option>Risotto aux truffes / topinambours r√¥tis</option>
            <option>Tataki de thon / nouilles Soba</option>
            <option>Curry de l√©gumes japonais</option>
            <option>Salade de quinoa / papeton de Butternut / Courge</option>
          </select>
        </div>
        <div class="field">
          <label>Dessert</label>
          <select name="dessert-1" required>
            <option value="">-- S√©lectionnez un dessert --</option>
            <option>Mousse au chocolat "D√©moniaque"</option>
            <option>Salade de fruits frais / sirop verveine</option>
            <option>Tarte "Snickers"</option>
            <option>Graines de chia / ananas / fruits exotique</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label>Boisson</label>
          <select name="boisson-1">
            <option value="">-- Choisissez une boisson --</option>
            <option>Eaux gazeuse 50cl</option>
            <option>Eaux plate 50cl</option>
            <option>Coca cola zero 50cl</option>
            <option>Coca cola 50 cl</option>
            <option>Jus d‚Äôorange</option>
            <option>Jus detox mangue gingembre 25cl</option>
            <option>Jus detox carotte citron 25cl</option>
            <option>Jus detox fruits rouge 25cl</option>
            <option>Limonade citron / citron vert 33cl</option>
            <option>Limonade citron / gingembre 33cl</option>
            <option>Kombucha curcuma / citron 33cl</option>
            <option>Kombucha mat√© / agrumes 33cl</option>
            <option>Kombucha hibiscus / rose 33cl</option>
          </select>
        </div>
        <div class="field">
          <label>Pain</label>
          <div class="inline-radios">
            <label><input type="radio" name="pain-1" value="Oui"> Oui</label>
            <label><input type="radio" name="pain-1" value="Non" checked> Non</label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label>Option Fromages (+3 ‚Ç¨)</label>
          <select name="fromage-1">
            <option value="">-- Sans fromage --</option>
            <option>p√©lardon</option>
            <option>crottin de ch√™vre</option>
            <option>st-Marcellin</option>
          </select>
        </div>
        <div class="field">
          <label>Commentaires</label>
          <textarea name="commentaires-1" placeholder="Allergies, consignes de livraison, etc."></textarea>
        </div>
      </div>
    </div>
  </div>

  <button type="button" class="btn btn-green" onclick="ajouterPlateau()">+ Ajouter un plateau</button>

  <div class="divider"></div>

  <h2>Informations de commande</h2>
  <div class="row">
    <div class="field">
      <label>Nom / Soci√©t√©</label>
      <input type="text" name="client-societe" required>
    </div>
    <div class="field">
      <label>Nom du contact</label>
      <input type="text" name="client-contact" required>
    </div>
  </div>
  <div class="row">
    <div class="field">
      <label>Email</label>
      <input type="email" name="client-email" required>
    </div>
    <div class="field">
      <label>T√©l√©phone</label>
      <input type="tel" name="client-tel">
    </div>
  </div>
  <div class="row">
    <div class="field">
      <label>Date de livraison souhait√©e</label>
      <input type="date" name="client-date" required>
    </div>
    <div class="field">
      <label>Heure souhait√©e</label>
      <input type="time" name="client-heure">
    </div>
  </div>

  <div class="footer-note">En envoyant ce formulaire, la commande sera transmise √† l‚Äô√©quipe FOUD (copie enregistr√©e dans Netlify Forms).</div>
  <br>
  <button class="btn btn-primary" type="submit">Envoyer ma commande</button>

  <div class="success" id="successMessage">
    ‚úÖ Merci ! Votre commande FOUD a bien √©t√© envoy√©e üç¥<br>
    Notre √©quipe vous confirme la r√©ception tr√®s bient√¥t.
  </div>
</form>
</div>

<script>
  let count = 1;

  function updateNames(node, newIndex) {
    node.setAttribute('data-index', newIndex);
    node.querySelector('.plateau-title').textContent = 'Plateau ' + newIndex;
    node.querySelectorAll('input, select, textarea').forEach(el => {
      const base = (el.getAttribute('name') || '').split('-')[0];
      if (base) el.setAttribute('name', base + '-' + newIndex);
      if (el.type !== 'radio' && el.type !== 'checkbox') el.value = '';
    });
    // reset radios (pain)
    const radios = node.querySelectorAll('input[type="radio"][name="pain-' + newIndex + '"]');
    if (radios.length) {
      radios.forEach(r => r.checked = false);
      // default Non
      const non = node.querySelector('input[type="radio"][name="pain-' + newIndex + '"][value="Non"]');
      if (non) non.checked = true;
    }
  }

  function ajouterPlateau() {
    count++;
    const container = document.getElementById('plateaux-container');
    const template = document.querySelector('.plateau');
    const clone = template.cloneNode(true);
    // Clear values & rename
    updateNames(clone, count);
    container.appendChild(clone);
  }

  function supprimerPlateau(btn) {
    const container = document.getElementById('plateaux-container');
    const items = container.querySelectorAll('.plateau');
    if (items.length <= 1) {
      // keep at least one
      alert('Au moins un plateau est requis.');
      return;
    }
    const node = btn.closest('.plateau');
    node.remove();
    // reindex remaining
    const rest = container.querySelectorAll('.plateau');
    count = 0;
    rest.forEach((el, i) => { count = i + 1; updateNames(el, count); });
  }

  // Show inline success message (Netlify fera la soumission/redirect si configur√©)
  const form = document.querySelector('form[name="commande-foud"]');
  form.addEventListener('submit', function() {
    const msg = document.getElementById('successMessage');
    if (msg) msg.style.display = 'block';
  });
</script>

</body>
</html>
